(function(){tinymce.create('tinymce.plugins.AutoResizePlugin',{init:function(ed,url){tinymce.createNS('springload',ed);ed.springload.defaultFocus=ed.focus;ed.focus=function(){}
ed.springload.autoresize_min_height=ed.getElement().offsetHeight;ed.onPreInit.add(function(ed){ed.springload.content_container=ed.getContentAreaContainer().firstChild;if(ed.springload.content_container.tagName=='IFRAME'){tinymce.dom.Event.add(ed.springload.content_container,'load',function(e){tinymce.EditorManager.get(ed.id).execCommand('mceAutoResize');});}});ed.onInit.add(function(ed,l){ed.setProgressState(true);ed.springload.throbbing=true;ed.getBody().style.overflowY="hidden";});ed.onChange.add(function(ed,l){ed.execCommand('mceAutoResize');});ed.onSetContent.add(function(ed,l){ed.execCommand('mceAutoResize');});ed.onPaste.add(function(ed,l){ed.execCommand('mceAutoResize');});ed.onKeyUp.add(function(ed,l){ed.execCommand('mceAutoResize');});ed.onPostRender.add(function(ed,l){ed.execCommand('mceAutoResize');});ed.onLoadContent.add(function(ed,l){ed.execCommand('mceAutoResize');setTimeout("tinymce.EditorManager.get('"+ed.id+"').execCommand('mceAutoResizeTimeout');",1250);});ed.addCommand('mceAutoResizeTimeout',function(){this.execCommand('mceAutoResize');this.setProgressState(false);this.springload.throbbing=false;if(typeof(this.springload.defaultFocus)=="function"){this.focus=this.springload.defaultFocus;this.springload.defaultFocus=false;}});ed.addCommand('mceAutoResize',function(){var d=this.getDoc(),b=d.body,de=d.documentElement,DOM=tinymce.DOM,resizeHeight=this.springload.autoresize_min_height;(tinymce.isIE)?myHeight=b.scrollHeight:myHeight=de.offsetHeight;if(myHeight>this.springload.autoresize_min_height){resizeHeight=myHeight;}
DOM.setStyle(this.springload.content_container,'height',resizeHeight+'px');if(this.springload.throbbing){this.setProgressState(false);this.setProgressState(true);}});},getInfo:function(){return{longname:'Auto Resize',author:'Springload',authorurl:'http://www.springload.co.nz',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins',version:"1.1"};}});tinymce.PluginManager.add('autoresize',tinymce.plugins.AutoResizePlugin);})();